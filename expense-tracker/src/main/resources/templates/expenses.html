<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>All Expenses</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    .card { border-radius: 12px; }
    .btn, .form-control { border-radius: 10px; }
    .table thead th { font-size: .85rem; color: #6c757d; font-weight: 600; }
  </style>
</head>

<body class="bg-light">
  <nav class="navbar bg-white border-bottom">
    <div class="container">
      <a class="navbar-brand fw-bold" href="/">Expense Tracker</a>
      
      <a class="btn btn-outline-primary" href="/dashboard">Dashboard</a>


      <!-- Optional logout -->
      <form th:action="@{/logout}" method="post" class="m-0">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <button class="btn btn-outline-secondary btn-sm" type="submit">Logout</button>
      </form>
    </div>
  </nav>

  <main class="container py-4">
    <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3">
      <div>
        <h1 class="h4 fw-bold mb-0">Expenses</h1>
        <div class="text-muted small">View, add, and manage your expenses</div>
      </div>

      <a class="btn btn-primary" href="/expenses/add">+ Add New Expense</a>
    </div>

    <div class="card shadow-sm">
      <div class="table-responsive">
        <table class="table table-hover mb-0 align-middle">
          <thead class="table-light">
            <tr>
              <th>Description</th>
              <th class="text-end">Amount</th>
              <th>Category</th>
              <th>Date</th>
              <th class="text-end">Actions</th>
            </tr>
          </thead>

          <tbody>
            <!-- Empty state -->
            <tr th:if="${#lists.isEmpty(expenses)}">
              <td colspan="5" class="text-center text-muted py-5">
                No expenses yet â€” add your first one.
              </td>
            </tr>

            <tr th:each="expense : ${expenses}">
              <td class="fw-semibold" th:text="${expense.description}">Lunch</td>

              <td class="text-end" th:text="${'$' + expense.amount}">$12.50</td>

              <td>
                <span class="badge text-bg-light border" th:text="${expense.category}">Food</span>
              </td>

              <td th:text="${expense.date}">2026-01-01</td>

              <td class="text-end">
                <!-- If your delete is GET (your current code), keep this: -->
                <a class="btn btn-outline-danger btn-sm"
                   th:href="@{/expenses/delete/{id}(id=${expense.id})}"
                   onclick="return confirm('Delete this expense?');">
                  Delete
                </a>

                <!-- Safer POST delete option (use if your controller supports POST):
                <form th:action="@{/expenses/delete/{id}(id=${expense.id})}" method="post" class="d-inline">
                  <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                  <button class="btn btn-outline-danger btn-sm"
                          onclick="return confirm('Delete this expense?');">
                    Delete
                  </button>
                </form>
                -->
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="mt-3">
      <a class="btn btn-outline-secondary" href="/">Back to Home</a>
    </div>
  </main>
</body>
</html>
